<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
<mapper namespace="com.hospital.erp.member.MemberDAO">
	<!-- 로그인 조회 쿼리문 -->
	<select id="memberLogin" parameterType="MemberVO" resultType="MemberVO">
  		SELECT
  			*
  		FROM
  			MEMBER
  		WHERE
  			ID = #{memCd} AND
  			PASSWORD = #{memPw}
  	</select>
  	
  	
  	<!-- 직원 조회 쿼리 -->
  	<select id="memberData" parameterType="MemberVO" resultType="MemberVO">
		SELECT
			*
		FROM
			MEMBER
		WHERE
			MEM_CD = #{memCd}  	
  	</select>
  	
  	<!-- Member 테이블 Insert 전 사번 입력을위해 가장 마지막 사번 조회해오는 쿼리문 -->
  	<select id="memberDataMaxMemCd" resultType="MemberVO" parameterType="MemberVO">
  		SELECT 
  			MAX(MEM_CD) AS MEM_CD,
  			MEM_HDATE
		FROM 
			MEMBER
		GROUP BY 
			JOB_CD
		HAVING 
			JOB_CD = #{jobCd} AND
			MEM_HDATE > #{memRdate}
			   
  	</select>
  	
  	<!-- MEMBER 테이블 INSERT 쿼리 -->
  	<insert id="memberInsert" parameterType="MemberVO">
  		INSERT INTO
  			MEMBER
  		VALUES
  			(
  			#{memCd},
  			#{jobCd},
  			0,
  			3,
  			#{codeCd},
  			#{memName},
  			#{memRnum},
  			#{memPw},
  			#{memPnum},
  			#{memAddress},
  			#{memEmail},
  			#{memHdate},
  			#{memSalary},
  			15,
  			NULL,
  			0,
  			NOW()
  			)
  			
  	</insert>
  	
</mapper>